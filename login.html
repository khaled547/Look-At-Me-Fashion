<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8" />
  <title>Login - Look At Me Fashion</title>

  <!-- Mobile Responsive -->
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&
               family=Poppins:wght@400;500;600&display=swap" 
        rel="stylesheet"/>

  <!-- Tailwind CSS -->
  <link href="src/output.css" rel="stylesheet" />

  <style>
    body {
      font-family: "Inter", "Poppins", sans-serif;
      background: linear-gradient(to bottom, #fff5f5, #ffeaea);
      -webkit-tap-highlight-color: transparent;
    }
    .input-box {
      width: 100%;
      padding: 14px;
      border: 1px solid #f6c7c7;
      border-radius: 14px;
      background: white;
      font-size: 15px;
      transition: 0.25s;
    }
    .input-box:focus {
      border-color: #FFD600;
      box-shadow: 0 0 0 2px #ffe188;
      outline: none;
    }
    .btn-login {
      width: 100%;
      padding: 14px;
      background: #FFD600;
      color: #6B0000;
      border-radius: 14px;
      font-weight: 700;
      font-size: 16px;
      transition: 0.2s;
      border: 1px solid #FFD600;
    }
    .btn-login:active {
      transform: scale(.96);
    }
    #msg {
      transition: 0.3s;
    }
  </style>
</head>

<body class="min-h-screen flex items-center justify-center px-4">

  <!-- ========================================================== -->
  <!-- LOGIN CARD -->
  <!-- ========================================================== -->
  <div class="w-full max-w-md bg-white rounded-2xl shadow-xl border border-red-200 p-7">

    <!-- Title -->
    <h1 class="text-3xl font-extrabold text-center text-[#6B0000] mb-6 tracking-wide">
      Login
    </h1>

    <!-- Input Fields -->
    <div class="space-y-4">
      <input id="email" class="input-box" placeholder="Email" />

      <input id="password" type="password" class="input-box" placeholder="Password" />

      <button id="loginBtn" class="btn-login shadow">
        Login
      </button>
    </div>

    <!-- Register Link -->
    <p class="text-center text-sm mt-4">
      Donâ€™t have an account?
      <a href="register.html" class="text-[#6B0000] font-semibold hover:underline">
        Register Now
      </a>
    </p>

    <!-- Message Box -->
    <p id="msg" class="text-center text-sm mt-4"></p>
  </div>


  <!-- ========================================================== -->
  <!-- LOGIN SCRIPT (Inline JS â€“ Premium + Explained) -->
  <!-- ========================================================== -->
  <script>
    const API = "http://localhost:5000/api/users/login";

    document.getElementById("loginBtn").addEventListener("click", handleLogin);

    /* ============================================================
       ðŸ” LOGIN FUNCTION
       ------------------------------------------------------------
       1ï¸âƒ£ Input à¦¨à§‡à¦¯à¦¼  
       2ï¸âƒ£ Backend à¦ POST à¦•à¦°à§‡  
       3ï¸âƒ£ Token + User localStorage à¦ save à¦•à¦°à§‡  
       4ï¸âƒ£ Success à¦¹à¦²à§‡ Profile page à¦ redirect  
    ============================================================ */
    async function handleLogin() {

      const email = document.getElementById("email").value.trim();
      const password = document.getElementById("password").value.trim();
      const msg = document.getElementById("msg");

      // Reset message
      msg.textContent = "";
      msg.style.opacity = "0";

      // Basic validation
      if (!email || !password) {
        showMessage("Email à¦à¦¬à¦‚ Password à¦ªà§à¦°à§Ÿà§‹à¦œà¦¨!", "red");
        return;
      }

      try {
        const res = await fetch(API, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ email, password })
        });

        const data = await res.json();

        // If API returns error
        if (!res.ok) {
          showMessage(data.message || "Invalid login details!", "red");
          return;
        }

        // SUCCESS animation message
        showMessage("Login Successful! Redirecting...", "green");

        // Save user auth data
        localStorage.setItem("lmf_token", data.token);
        localStorage.setItem("lmf_user", JSON.stringify(data.user));

        // Redirect after delay
        setTimeout(() => {
          window.location.href = "user-profile.html";
        }, 1200);

      } catch (error) {
        console.error(error);
        showMessage("Something went wrong! Try again.", "red");
      }
    }

    /* ============================================================
       ðŸ”” SHOW MESSAGE FUNCTION
       ------------------------------------------------------------
       Error / Success text user-friendly smooth animation à¦¸à¦¹
    ============================================================ */
    function showMessage(text, color) {
      const msg = document.getElementById("msg");
      msg.textContent = text;
      msg.style.color = color;
      msg.style.opacity = "1";
    }
  </script>

</body>
</html>
