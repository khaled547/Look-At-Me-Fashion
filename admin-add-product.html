<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8" />
  <title>Add Product - Look At Me Fashion (Admin)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Premium Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <!-- Tailwind CSS -->
  <link href="src/output.css" rel="stylesheet">

  <style>
    body {
      font-family: "Poppins", sans-serif;
      background: #fff7f7;
    }
  </style>
</head>

<body class="text-gray-900">

  <!-- =============================== -->
  <!-- HEADER (Mobile Friendly)        -->
  <!-- =============================== -->
  <header class="sticky top-0 bg-white shadow border-b border-red-200 z-50">
    <nav class="max-w-7xl mx-auto px-4 py-3 flex justify-between items-center">

      <!-- LOGO -->
      <div class="bg-[#6B0000] px-4 py-1.5 rounded-lg shadow">
        <span class="text-[#FFD600] font-extrabold text-sm sm:text-lg tracking-wide">
          LMF ADMIN
        </span>
      </div>

      <!-- Back to Admin Dashboard -->
      <a href="admin-dashboard.html"
        class="text-xs sm:text-sm font-semibold text-[#6B0000] border border-[#FFD600] bg-[#FFD600]/80 px-3 py-1.5 rounded-full hover:bg-[#FFD600] transition">
        ‚Üê Dashboard
      </a>

    </nav>
  </header>


  <!-- =============================== -->
  <!-- MAIN CONTENT                    -->
  <!-- =============================== -->
  <main class="max-w-3xl mx-auto px-4 py-6 space-y-6">

    <!-- PAGE TITLE -->
    <section>
      <h1 class="text-2xl sm:text-3xl font-extrabold text-[#6B0000]">
        Add New Product
      </h1>
      <p class="text-sm text-gray-600 mt-1">
        ‡¶®‡¶ø‡¶ö‡ßá‡¶∞ ‡¶´‡¶∞‡ßç‡¶Æ ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßá ‡¶®‡¶§‡ßÅ‡¶® ‡¶™‡ßç‡¶∞‡ßã‡¶°‡¶æ‡¶ï‡ßç‡¶ü ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®‡•§
      </p>
    </section>

    <!-- FORM CARD (Mobile-optimized) -->
    <section class="bg-white border border-red-200 rounded-2xl shadow-lg p-5 space-y-4">

      <!-- PRODUCT FORM -->
      <form id="productForm" class="space-y-4">

        <!-- PRODUCT NAME -->
        <div>
          <label class="block text-sm font-semibold mb-1 text-gray-700">
            Product Name <span class="text-red-600">*</span>
          </label>
          <input
            id="prodName"
            type="text"
            placeholder="e.g. Premium Hand Bag"
            class="w-full px-3 py-2 rounded-lg border border-red-200 focus:ring-2 focus:ring-[#FFD600] text-sm"
            required
          />
        </div>

        <!-- PRICE + CATEGORY -->
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">

          <!-- PRICE -->
          <div>
            <label class="block text-sm font-semibold mb-1">
              Price (‡ß≥) <span class="text-red-600">*</span>
            </label>
            <input
              id="prodPrice"
              type="number"
              min="0"
              placeholder="e.g. 1400"
              class="w-full px-3 py-2 rounded-lg border border-red-200 focus:ring-2 focus:ring-[#FFD600] text-sm"
              required
            />
          </div>

          <!-- CATEGORY -->
          <div>
            <label class="block text-sm font-semibold mb-1">
              Category <span class="text-red-600">*</span>
            </label>
            <input
              id="prodCategory"
              type="text"
              placeholder="e.g. Bags / Hijab / Watches"
              class="w-full px-3 py-2 rounded-lg border border-red-200 focus:ring-2 focus:ring-[#FFD600] text-sm"
              required
            />
          </div>
        </div>

        <!-- IMAGE -->
        <div>
          <label class="block text-sm font-semibold mb-1">
            Image File Name <span class="text-red-600">*</span>
          </label>
          <input
            id="prodImage"
            type="text"
            placeholder="e.g. bag-01.jpg"
            class="w-full px-3 py-2 rounded-lg border border-red-200 focus:ring-2 focus:ring-[#FFD600] text-sm"
            required
          />
          <p class="text-[11px] text-gray-500 mt-1">
            ‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶´‡¶æ‡¶á‡¶≤ ‡¶®‡¶æ‡¶Æ ‡¶¶‡¶ø‡¶® (image/ ‡¶´‡ßã‡¶≤‡ßç‡¶°‡¶æ‡¶∞ ‡¶•‡ßá‡¶ï‡ßá ‡¶≤‡ßã‡¶° ‡¶π‡¶¨‡ßá)
          </p>
        </div>

        <!-- DESCRIPTION -->
        <div>
          <label class="block text-sm font-semibold mb-1">
            Description
          </label>
          <textarea
            id="prodDescription"
            rows="3"
            placeholder="Product details ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®..."
            class="w-full px-3 py-2 rounded-lg border border-red-200 focus:ring-2 focus:ring-[#FFD600] text-sm resize-y"
          ></textarea>
        </div>

        <!-- ACTION BUTTONS -->
        <div class="flex flex-col sm:flex-row justify-between items-center gap-3 pt-2">

          <button
            type="submit"
            class="px-8 py-2.5 rounded-full bg-[#FFD600] text-[#6B0000] font-bold shadow hover:bg-white hover:shadow-lg border border-[#FFD600] transition">
            üíæ Save Product
          </button>

          <button id="resetBtn" type="button" class="text-sm font-semibold text-gray-500 underline">
            Reset Form
          </button>

        </div>
      </form>
    </section>
  </main>


  <!-- TOAST MESSAGE -->
  <div
    id="toast"
    class="fixed bottom-6 right-6 bg-[#6B0000] text-[#FFD600] px-4 py-2 rounded-full shadow-lg text-sm opacity-0 pointer-events-none transition-all duration-300">
    Product saved successfully!
  </div>


  <!-- =============================== -->
  <!-- INLINE JAVASCRIPT               -->
  <!-- =============================== -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {

      // Backend API URL
      const API_URL = "http://localhost:5000/api/products";

      // Admin Token
      const token = localStorage.getItem("lmf_admin_token");

      // Admin ‡¶®‡¶æ ‡¶•‡¶æ‡¶ï‡¶≤‡ßá redirect
      if (!token) {
        alert("Admin login required!");
        return (window.location.href = "admin-login.html");
      }

      // Form Elements
      const formEl = document.getElementById("productForm");
      const toastEl = document.getElementById("toast");

      // ===============================
      // PRODUCT FORM SUBMIT HANDLER
      // ===============================
      formEl.addEventListener("submit", async (e) => {
        e.preventDefault();

        // Form values collect
        const payload = {
          name: prodName.value.trim(),
          price: Number(prodPrice.value.trim()),
          category: prodCategory.value.trim(),
          image: prodImage.value.trim(),
          description: prodDescription.value.trim(),
        };

        // Basic validation
        if (!payload.name || !payload.price || !payload.category || !payload.image) {
          return alert("Name, Price, Category ‡¶è‡¶¨‡¶Ç Image ‡¶¶‡ßá‡¶ì‡ßü‡¶æ ‡¶¨‡¶æ‡¶ß‡ßç‡¶Ø‡¶§‡¶æ‡¶Æ‡ßÇ‡¶≤‡¶ï!");
        }

        try {
          const submitBtn = formEl.querySelector("button[type='submit']");
          submitBtn.disabled = true;
          submitBtn.textContent = "Saving...";

          const res = await fetch(API_URL, {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
              "Authorization": "Bearer " + token,
            },
            body: JSON.stringify(payload),
          });

          if (!res.ok) throw new Error("Save failed");

          showToast("Product saved successfully! üéâ");
          formEl.reset();

        } catch (err) {
          console.error(err);
          showToast("Failed to save product ‚ùå");
        } finally {
          const submitBtn = formEl.querySelector("button[type='submit']");
          submitBtn.disabled = false;
          submitBtn.textContent = "üíæ Save Product";
        }
      });

      // ===============================
      // RESET BUTTON
      // ===============================
      resetBtn.addEventListener("click", () => formEl.reset());

      // ===============================
      // BEAUTIFUL TOAST ANIMATION
      // ===============================
      function showToast(msg) {
        toastEl.textContent = msg;
        toastEl.classList.add("opacity-100");
        toastEl.classList.remove("opacity-0");

        setTimeout(() => {
          toastEl.classList.remove("opacity-100");
          toastEl.classList.add("opacity-0");
        }, 2000);
      }
    });
  </script>

</body>
</html>
